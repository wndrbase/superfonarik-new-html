{% set title = "Где купить?" %}

{% set description = "Мы осуществим доставку в любую точку России, Белоруссия, Казахстана, Армении и Таджикистана." %}

{% set urlPage = "where-to-buy" %}

{% set breadcrumbs = [
	{
		name : "Где купить?",
		link: "where-to-buy"
	}
] %}

{% extends "template/base.html" %}

{% block content %}

	<article class="address article">

		<h1 class="address__title h1">
			{{ title }}
		</h1>

		<div class="address__box">

			<div class="address__left">

				<div class="address__city">

					<a href="#moskva" class="btn btn--tab is-active">
						Москва
					</a>

					<a href="#ekaterinburg" class="btn btn--tab">
						Екатеринбург
					</a>

					<a href="#kursk" class="btn btn--tab">
						Курск
					</a>

					<a href="#samara" class="btn btn--tab">
						Самара
					</a>

					<a href="#sankt-peterburg" class="btn btn--tab">
						Санкт-Петербург
					</a>

					<a href="#yakutsk" class="btn btn--tab">
						Якутск
					</a>

				</div>

				<div class="address__map" id="moskva">
				</div>

				<div class="address-shop address-shop--moskva">

					<div class="address-shop__item">

						<h3 class="address-shop__title">
							Магазин Суперфонарик
						</h3>

						<table class="table-characteristics">
							<tbody>
								<tr>
									<td>Телефоны:</td>
									<td>
										<a href="tel:+74953693005">+7 (495) 369-30-05</a><br>
										<a href="tel:+79261715254">+7 (926) 171-52-54</a><br>
										<a href="tel:+78001002166">+7 (800) 100-21-66</a><br>
										<a href="tel:+74959698447">+7 (495) 969-84-47</a>
									</td>
								</tr>
								<tr>
									<td>E-Mai:</td>
									<td>
										<a href="mailto:sf@superfonarik.ru">sf@superfonarik.ru</a>
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<b>Информация:</b> <br>
										г. Москва, Варшавское шоссе, д. 42, офис 2314. Бизнес-центр "На Варшавке", 2-й этаж. К вашим услугам - высококвалифицированные консультанты, демо-зал со всей продукцией, мягкий кожаный диван и приятная музыка ;) Время работы офиса: с понедельника по пятницу, с 10:00 до 20:00. По субботам - по предварительной договорённости (по телефону), после 13:00.
									</td>
								</tr>
							</tbody>
						</table>

						<div class="link-all link-all--gray">

							<a href="#moskva" class="button" data-shop="1">
								Посмотреть на карте
								<svg width="24" height="18" viewBox="0 0 24 18">
									<path d="M23.85 7.59C23.63 7.28 18.53 0 12 0S.37 7.28.15 7.59a.88.88 0 000 1c.21.31 5.32 7.59 11.85 7.59s11.63-7.29 11.85-7.6a.88.88 0 000-.99zM12 14.5c-4.81 0-9-4.83-10.2-6.41C3 6.5 7.18 1.67 12 1.67s9 4.83 10.2 6.41C21 9.67 16.82 14.5 12 14.5z"/>
									<path d="M12 3.27A4.75 4.75 0 1016.75 8 4.75 4.75 0 0012 3.27zm0 7.91A3.17 3.17 0 1115.17 8 3.17 3.17 0 0112 11.18z"/>
								</svg>
							</a>

						</div>

					</div>

					<div class="address-shop__item">

						<h3 class="address-shop__title">
							Магазин Спорт-Марафон
						</h3>

						<table class="table-characteristics">
							<tbody>
								<tr>
									<td>Телефоны:</td>
									<td>
										<a href="tel:88003331441">8 (800) 333-14-41</a><br>
										<a href="tel:+74956681497">+7 (495) 668-14-97</a>
									</td>
								</tr>
								<tr>
									<td>E-Mai:</td>
									<td>
										<a href="mailto:a.kalashnikov@sport-marafon.ru">a.kalashnikov@sport-marafon.ru</a>
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<b>Информация:</b> <br>
										г. Москва, ул. Сайкина д. 4, Время работы: ежедневно с 10:00 до 24:00 Один из крупнейших в России специализированных магазинов снаряжения для горнолыжного спорта и сноубординга, всех видов туризма, кемпинга и путешествий, альпинизма и скалолазания, бега и мультигонок.
									</td>
								</tr>
							</tbody>
						</table>

						<div class="link-all link-all--gray">

							<a href="#moskva" class="button" data-shop="2">
								Посмотреть на карте
								<svg width="24" height="18" viewBox="0 0 24 18">
									<path d="M23.85 7.59C23.63 7.28 18.53 0 12 0S.37 7.28.15 7.59a.88.88 0 000 1c.21.31 5.32 7.59 11.85 7.59s11.63-7.29 11.85-7.6a.88.88 0 000-.99zM12 14.5c-4.81 0-9-4.83-10.2-6.41C3 6.5 7.18 1.67 12 1.67s9 4.83 10.2 6.41C21 9.67 16.82 14.5 12 14.5z"/>
									<path d="M12 3.27A4.75 4.75 0 1016.75 8 4.75 4.75 0 0012 3.27zm0 7.91A3.17 3.17 0 1115.17 8 3.17 3.17 0 0112 11.18z"/>
								</svg>
							</a>

						</div>

					</div>

					<div class="address-shop__item">

						<h3 class="address-shop__title">
							Торговый комплекс "Спорт-Хит"
						</h3>

						<table class="table-characteristics">
							<tbody>
								<tr>
									<td>Телефон:</td>
									<td>
										<a href="tel:+79175393953">+7 (917) 539-39-53</a>
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<b>Информация:</b> <br>
										Сколковское шоссе, д.31, торговый комплекс "Спорт-Хит", павильон 10А, (2-й этаж, с эскалатора - направо). Магазин Proper-Light.
									</td>
								</tr>
							</tbody>
						</table>

						<div class="link-all link-all--gray">

							<a href="#moskva" class="button" data-shop="3">
								Посмотреть на карте
								<svg width="24" height="18" viewBox="0 0 24 18">
									<path d="M23.85 7.59C23.63 7.28 18.53 0 12 0S.37 7.28.15 7.59a.88.88 0 000 1c.21.31 5.32 7.59 11.85 7.59s11.63-7.29 11.85-7.6a.88.88 0 000-.99zM12 14.5c-4.81 0-9-4.83-10.2-6.41C3 6.5 7.18 1.67 12 1.67s9 4.83 10.2 6.41C21 9.67 16.82 14.5 12 14.5z"/>
									<path d="M12 3.27A4.75 4.75 0 1016.75 8 4.75 4.75 0 0012 3.27zm0 7.91A3.17 3.17 0 1115.17 8 3.17 3.17 0 0112 11.18z"/>
								</svg>
							</a>

						</div>

					</div>

				</div>

				<div class="address__map" id="ekaterinburg">
				</div>

				<div class="address-shop address-shop--ekaterinburg">
					ekaterinburg

						<div class="link-all link-all--gray">

							<a href="#ekaterinburg" class="button" data-shop="4">
								Посмотреть на карте
								<svg width="24" height="18" viewBox="0 0 24 18">
									<path d="M23.85 7.59C23.63 7.28 18.53 0 12 0S.37 7.28.15 7.59a.88.88 0 000 1c.21.31 5.32 7.59 11.85 7.59s11.63-7.29 11.85-7.6a.88.88 0 000-.99zM12 14.5c-4.81 0-9-4.83-10.2-6.41C3 6.5 7.18 1.67 12 1.67s9 4.83 10.2 6.41C21 9.67 16.82 14.5 12 14.5z"/>
									<path d="M12 3.27A4.75 4.75 0 1016.75 8 4.75 4.75 0 0012 3.27zm0 7.91A3.17 3.17 0 1115.17 8 3.17 3.17 0 0112 11.18z"/>
								</svg>
							</a>

						</div>

				</div>

				<div class="address__map" id="kursk">
				</div>

				<div class="address-shop address-shop--kursk">
					kursk
				</div>

				<div class="address__map" id="samara">
				</div>

				<div class="address-shop address-shop--samara">
					samara
				</div>

				<div class="address__map" id="sankt-peterburg">
				</div>

				<div class="address-shop address-shop--sankt-peterburg">
					sankt-peterburg
				</div>

				<div class="address__map" id="yakutsk">
				</div>

				<div class="address-shop address-shop--yakutsk">
					yakutsk
				</div>

			</div>

			<div class="address__right">

				<h2>
					Не нашли свой Город?
				</h2>

				<p class="h4">
					Мы осуществим доставку в любую точку <span>России, Белоруссия, Казахстана, Армении и Таджикистана.</span>
				</p>

			</div>

		</div>

		<script src="//api-maps.yandex.ru/2.1/?lang=ru_RU"></script>

		<script>

			var list = {
				"city" : [
					{
						"name"   : "moskva",
						"center" : [55.753593, 37.621018],
					},
					{
						"name"   : "ekaterinburg",
						"center" : [56.838607, 60.605514]
					},
					{
						"name"   : "kursk",
						"center" : [51.730361, 36.192647]
					},
					{
						"name"   : "samara",
						"center" : [53.195533, 50.101801]
					},
					{
						"name"   : "sankt-peterburg",
						"center" : [59.939095, 30.315868]
					},
					{
						"name"   : "yakutsk",
						"center" : [62.028098, 129.732555]
					}
				],
				"shops"  : [
					{
						"id"   : 1,
						"city" : "moskva",
						"name" :  "Магазин Суперфонарик",
						"coord": [55.67604782173, 37.625051736832]
					},
					{
						"id"   : 2,
						"city" : "moskva",
						"name" :  "Магазин Спорт-Марафон",
						"coord": [55.706185247634, 37.666448042992]
					},
					{
						"id"   : 3,
						"city" : "moskva",
						"name" :  "Торговый комплекс &quot;Спорт-Хит&quot;",
						"coord": [55.705958113282, 37.404220104218]
					},
					{
						"id"   : 4,
						"city" : "ekaterinburg",
						"name" : "Охотничий супермаркет &quot;Стрелец&quot;",
						"coord": [56.834336720104, 60.60371875763]
					},
					{
						"id"   : 5,
						"city" : "kursk",
						"name" : "Магазин &quot;Стрелок&quot;",
						"coord": [51.737912232898, 36.191153526306]
					},
					{
						"id"   : 6,
						"city" : "samara",
						"name" : "Магазин SuperFonarik",
						"coord": [53.203140789372, 50.156342983246]
					},
					{
						"id"   : 7,
						"city" : "sankt-peterburg",
						"name" : "Интернет-магазин Фонарик 24",
						"coord": [59.919581012555, 30.232315063477]
					},
					{
						"id"   : 8,
						"city" : "yakutsk",
						"name" : "Магазин &quot;Охотник на Ярославского&quot;",
						"coord": [62.027597774133, 129.73872900009]
					}
				]
			};

			console.log(list);

			function initMap() {

				var myMaps = {},
					myPlacemarks = {};

				list.city.forEach(function(item) {

					var myMap = new ymaps.Map(item.name, {
						center: item.center,
						zoom: 9,
						controls: []
					});

					var zoomControl = new ymaps.control.ZoomControl({
						options: {
							visible: true
						}
					});

					myMap.controls.add(zoomControl);

					var PlacemarkCollectionMaster = new ymaps.GeoObjectCollection(null, {
						preset: 'islands#yellowIcon'
					});

					ymaps.ready(function () {

						myPlacemarks[item.name] = [];

						list.shops.forEach(function(point) {

							point.placemark = new ymaps.Placemark(point.coord);

							point.placemark.properties.set('balloonContentBody', '<h3>' + point.name + '</h3>');

							PlacemarkCollectionMaster.add(point.placemark);

							myPlacemarks[item.name][point.id] = point.placemark;

						});

						myMap.geoObjects.add(PlacemarkCollectionMaster);

					});

					myMaps[item.name] = myMap;

				});

				PubSub.subscribe('addressShop', function(e,value){

					console.log(value);

					list.shops.forEach(function(item) {

						if( value == item.id ) {

							myMaps[item.city].setZoom(16);
							myMaps[item.city].setCenter(item.coord);
							myPlacemarks[item.city][value].balloon.open();

						}

					});

				});

			}

			ymaps.ready(initMap);

		</script>

	</article>

{% endblock %}